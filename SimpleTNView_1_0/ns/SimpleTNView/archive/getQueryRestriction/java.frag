<?xml version="1.0" encoding="UTF-8"?>

<Values version="2.0">
  <value name="name">getQueryRestriction</value>
  <value name="encodeutf8">true</value>
  <value name="body">SURhdGFDdXJzb3IgaWRhdGFjdXJzb3IgPSBudWxsOwpTdHJpbmcgZG9jaWQgPSBudWxsOwp0cnkK
ewoJaWRhdGFjdXJzb3IgPSBwaXBlbGluZS5nZXRDdXJzb3IoKTsKICAgICAgICBTdHJpbmcgdXNl
cl9uYW1lID0gU2VydmljZS5nZXRVc2VyKCkuZ2V0TmFtZSgpOwogICAgICAgIFZlY3RvciB2ZWN0
b3IgPSBTZXJ2aWNlLmdldFVzZXIoKS5tZW1iZXJzaGlwTmFtZXMoKTsKICAgICAgICBTdHJpbmcg
c2VuZGVyX2Rpc3BsYXlfbmFtZSA9IG51bGw7CiAgICAgICAgU3RyaW5nIHJlY2VpdmVyX2Rpc3Bs
YXlfbmFtZSA9IG51bGw7CiAgICAgICAgU3RyaW5nIHNlbmRlcl9leHRfaWQgPSBudWxsOwogICAg
ICAgIFN0cmluZyByZWNlaXZlcl9leHRfaWQgPSBudWxsOwogICAgICAgIAoJaWYoaWRhdGFjdXJz
b3IuZmlyc3QoImRvY2lkIikpCiAgICAgICAgICAgZG9jaWQgPSAoU3RyaW5nKWlkYXRhY3Vyc29y
LmdldFZhbHVlKCk7CiAgICAgICAgZWxzZQogICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRXhj
ZXB0aW9uKFN5c3RlbUxvZzIuZm9ybWF0KCJUUk5TRVJWLjAwMDAxOC4wMDAwMDEiLCAiZG9jaWQi
KSk7CiAgICAgICAgaWYoZG9jaWQgPT0gbnVsbCB8fCBkb2NpZC5sZW5ndGgoKSA9PSAwKQogICAg
ICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRXhjZXB0aW9uKFN5c3RlbUxvZzIuZm9ybWF0KCJUUk5T
RVJWLjAwMDAxOC4wMDAwMTgiLCAiZG9jaWQiKSk7CiAvKgogICAgICAgIGlkYXRhY3Vyc29yLmlu
c2VydEFmdGVyKCJpbnRlcm5hbElkIiwgZG9jaWQpOwogICAgICAgIGlkYXRhY3Vyc29yLmluc2Vy
dEFmdGVyKCJnZXRDb250ZW50IiwgInRydWUiKTsKICAgICAgICBTZXJ2aWNlLmRvSW52b2tlKCJ3
bS50bi5kb2MiLCAidmlldyIsIHBpcGVsaW5lKTsKCiAgICAgICAgQml6RG9jRW52ZWxvcGUgYml6
ZG9jZW52ZWxvcGUgPSBudWxsOwogICAgICAgIGlmKGlkYXRhY3Vyc29yLmZpcnN0KCJiaXpkb2Mi
KSkKICAgICAgICB7CiovCglTdHJpbmcgc3FsID0gIlNFTEVDVCAqIEZST00gQVJDSElWRV9CSVpE
T0MgV0hFUkUgRE9DSUQ9JyIgKyBkb2NpZCArICInIjsKCglBcnJheUxpc3QgYWwgPSBxdWVyeShz
cWwpOwoJaWYgKGFsICE9IG51bGwpCgl7CiAgICAgICAgICAgUHJvZmlsZVN0b3JlIHByb2ZpbGVz
dG9yZSA9IFByb2ZpbGVTdG9yZS5nZXRQcm9maWxlU3RvcmUoKTsKCSAgIAkKICAgICAgICAgICAv
LyBiaXpkb2NlbnZlbG9wZSA9IChCaXpEb2NFbnZlbG9wZSlpZGF0YWN1cnNvci5nZXRWYWx1ZSgp
OwoKCSAgIElEYXRhIGJpemRvY19kYXRhID0gKElEYXRhKWFsLmdldCgwKTsKICAgICAgICAgICBT
dHJpbmcgc2VuZGVyX2lkID0gZ2V0RGF0YVZhbHVlKGJpemRvY19kYXRhLCAiU0VOREVSSUQiKTsg
Ly8idXM2Z2tnMDAwMjExYnZ1cDAwMDAwMDBhIjsgLy9iaXpkb2NlbnZlbG9wZS5nZXRTZW5kZXJJ
ZCgpOwogICAgICAgICAgIHNlbmRlcl9kaXNwbGF5X25hbWUgPSBwcm9maWxlc3RvcmUuZ2V0UHJv
ZmlsZVN1bW1hcnkoc2VuZGVyX2lkKS5nZXREaXNwbGF5TmFtZSgpOwogICAgICAgICAgIHNlbmRl
cl9leHRfaWQgPSBwcm9maWxlc3RvcmUuZ2V0UmVxdWlyZWRFeHRlcm5hbElEKHNlbmRlcl9pZCk7
CgogICAgICAgICAgIFN0cmluZyByZWNlaXZlcl9pZCA9IGdldERhdGFWYWx1ZShiaXpkb2NfZGF0
YSwgIlJFQ0VJVkVSSUQiKTsgLy8idXM2Z2tnMDAwMjExbWJnZDAwMDAwMDBoIjsgLy9iaXpkb2Nl
bnZlbG9wZS5nZXRSZWNlaXZlcklkKCk7CiAgICAgICAgICAgcmVjZWl2ZXJfZGlzcGxheV9uYW1l
ID0gcHJvZmlsZXN0b3JlLmdldFByb2ZpbGVTdW1tYXJ5KHJlY2VpdmVyX2lkKS5nZXREaXNwbGF5
TmFtZSgpOwogICAgICAgICAgIHJlY2VpdmVyX2V4dF9pZCA9IHByb2ZpbGVzdG9yZS5nZXRSZXF1
aXJlZEV4dGVybmFsSUQocmVjZWl2ZXJfaWQpOwogICAgICAgIH0KCiAgICAgICAvLyBpZiAoYml6
ZG9jZW52ZWxvcGUgPT0gbnVsbCkKICAgICAgIC8vICAgICB0aHJvdyBFWE1MRXhjZXB0aW9uLmZy
b21SZXNvdXJjZSgiVFJOU0VSVi4wMDAwMTguMDAwMDY3IiwgbmV3IFN0cmluZ1tdIHtkb2NpZH0s
IG51bGwpOwogCiAgICAgICAgaWRhdGFjdXJzb3IuaW5zZXJ0QWZ0ZXIoInNlbmRlckRpc3BsYXlO
YW1lIiwgc2VuZGVyX2Rpc3BsYXlfbmFtZSk7CiAgICAgICAgaWRhdGFjdXJzb3IuaW5zZXJ0QWZ0
ZXIoInJlY2VpdmVyRGlzcGxheU5hbWUiLCByZWNlaXZlcl9kaXNwbGF5X25hbWUpOwogICAgICAg
IGlkYXRhY3Vyc29yLmluc2VydEFmdGVyKCJzZW5kZXJCMkJOYW1lIiwgc2VuZGVyX2V4dF9pZCk7
CiAgICAgICAgaWRhdGFjdXJzb3IuaW5zZXJ0QWZ0ZXIoInJlY2VpdmVyQjJCTmFtZSIsIHJlY2Vp
dmVyX2V4dF9pZCk7CiAgICAgICAgaWYodmVjdG9yLmNvbnRhaW5zKCJUTkFkbWluaXN0cmF0b3Jz
IikpCiAgICAgICAgICAgaWRhdGFjdXJzb3IuaW5zZXJ0QWZ0ZXIoImlzQWxsb3dlZCIsICJ0cnVl
Iik7CiAgICAgICAgZWxzZSBpZiAodmVjdG9yLmNvbnRhaW5zKCJUTlBhcnRuZXJzIikpCiAgICAg
ICAgewogICAgICAgICAgICAgICAgaWYoSTE4TlV0aWwuaXNFcXVhbCh1c2VyX25hbWUsIHNlbmRl
cl9leHRfaWQpIHx8IEkxOE5VdGlsLmlzRXF1YWwodXNlcl9uYW1lLCByZWNlaXZlcl9leHRfaWQp
KQogICAgICAgICAgICAgICAgICAgIGlkYXRhY3Vyc29yLmluc2VydEFmdGVyKCJpc0FsbG93ZWQi
LCAidHJ1ZSIpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGlkYXRh
Y3Vyc29yLmluc2VydEFmdGVyKCJpc0FsbG93ZWQiLCAiZmFsc2UiKTsKICAgICAgICB9IAoJZWxz
ZQogICAgICAgIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZXJ2aWNlRXhjZXB0aW9uKFN5
c3RlbUxvZzIuZm9ybWF0KCJUUk5TRVJWLjAwMDAxOC4wMDAwNTEiKSk7CiAgICAgICAgfQp9CmNh
dGNoKFRocm93YWJsZSB0aHJvd2FibGUpCnsKICAgICAgdGhyb3cgRVhNTEV4Y2VwdGlvbi5mcm9t
UmVzb3VyY2UoIlRSTlNFUlYuMDAwMDE4LjAwMDAyNSIsIG5ldyBTdHJpbmdbXSB7ZG9jaWR9LCB0
aHJvd2FibGUpOwp9CmZpbmFsbHkKewogICAgICBpZihpZGF0YWN1cnNvciAhPSBudWxsKQogICAg
ICAgICBpZGF0YWN1cnNvci5kZXN0cm95KCk7Cn0K</value>
</Values>
